<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
  xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="
    http://www.liquibase.org/xml/ns/dbchangelog
    http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.23.xsd">
  
    <changeSet id="000-create-database" author="dev">
        <sql>CREATE DATABASE IF NOT EXISTS production;</sql>
        <rollback>
            DROP DATABASE IF EXISTS production;
        </rollback>
    </changeSet>

    <!-- Tables -->
    <changeSet id="001" author="dev">
        <sqlFile path="../sql/create_table.sql"
                 relativeToChangelogFile="true"
                 splitStatements="true"/>
    </changeSet>

    <!-- Seed data -->
    <changeSet id="002" author="dev">
        <sqlFile path="../sql/insert_users.sql"
                 relativeToChangelogFile="true"
                 splitStatements="true"/>
    </changeSet>

    <!-- Stored procedures -->
    <changeSet id="003" author="dev">
        <sqlFile path="../sql/proc_cleanup.sql"
                 relativeToChangelogFile="true"
                 splitStatements="false"/>
    </changeSet>

    <changeSet id="004" author="dev">
        <sqlFile path="../sql/proc_create_users.sql"
                 relativeToChangelogFile="true"
                 splitStatements="false"/>
    </changeSet>

    <changeSet id="005" author="dev">
        <sqlFile path="../sql/proc_update_orders.sql"
                 relativeToChangelogFile="true"
                 splitStatements="false"/>
    </changeSet>
  
    <changeSet id="006" author="dev">
        <sqlFile  path="../sql/insert_new_user.sql"
                  relativeToChangelogFile="true"
                  splitStatements="true"/>
    </changeSet>

</databaseChangeLog>
